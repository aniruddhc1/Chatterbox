<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ChatterBox</title>
    
    <script src="/js/chatclient.js"></script>
    <script src="/js/jquery-1.11.0.min.js"></script>



      <script>
    $(function(){
                if ('WebSocket' in window){
                    /* WebSocket is supported. You can proceed with your code*/
                    try{
                        connection = new WebSocket("ws://localhost:1050/join?username=test")

                        connection.onopen = function(){
                           /*Send a small message to the console once the connection is established */
                           alert('Connection open!');
                        }

                        /*
                            To send messages to this function from server do something like this:
                                var message = {
                                'name': 'bill murray',
                                'comment': 'No one will ever believe you'
                                };
                            connection.send(JSON.stringify(message));
                        */

                        connection.onmessage = function(e){
                           var server_message = e.data;
                           alert(server_message);
                        }

                        connection.onclose = function() {
                            alert("websocket closing")
                        }
                    } catch(e) {
                        alert("An error happened " + e)
                    }
                } else {
                    /*WebSockets are not supported. Try a fallback method like long-polling etc*/
                    alert("Sorry you can't use our awesome chatterbox because your browser doesn't support websockets")
                }

        });

    </script>

    <!-- Bootstrap -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/chatclient.css" rel="stylesheet">
  </head>
  <body style="background-image:url(/images/bubbleBlur2.jpg);">

    
   <div class="bs-component">
      <div class="navbar navbar-default">
          <div class="navbar-header">
            <a class="navbar-brand" href="#">Chatterbox</a>
          </div>

          <div class="navbar-collapse collapse navbar-responsive-collapse">
                  
            <form class="navbar-form navbar-left">
              <ul class="nav navbar-nav">
                <li class="chatLi">
                  <button type="button" class="btn btn-default btn-sm" onclick="JoinRoom()"> Join A New Room </button> 
                </li>  
                <li class="roomLi">
                  <input type="text" id="roomName" class="form-control input-sm" placeholder="Room Name">
                </li> 
              </ul> 
            </form>
            
          </div>
        </div>
    </div> 
    
    <div id="mainPage">
        <div id="chatbox">
          <div class="bs-component" id="MainDiv">
            <ul class="nav nav-tabs" style="margin-bottom: 15px;" id="RoomPanel">
              <li class="active"><a href="#home" data-toggle="tab">Home</a></li>
              <li><a href="#profile" data-toggle="tab">Profile</a></li>
            </ul>
          </div>

          <div id="messages">
          </div>

        </div>

        <div id="sendMessage">
          <form id="send">
            <ul class="nav navbar-nav">
            <li class="sendLi">
              <input type="text" id="message" class="form-control" placeholder="">
            </li>
            <li>
              <button type="button" class="btn btn-default" onclick="SendMessage()"> Send </button>
            </li>
            </ul>
          </form>
        </div>
   </div>
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/js/bootstrap.min.js"></script>
  </body>
</html>